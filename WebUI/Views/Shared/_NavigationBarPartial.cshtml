@inject IUserService _userService;
@{
    var currentUser = Tuple.Create(string.Empty, string.Empty) ;
    if (User.Identity.IsAuthenticated)
    {
        currentUser = await _userService.GetUserInfoForNavigationBar(Guid.Parse(User.Identity.Name));
    }
}

<style>
    .nav-button {
        outline: none !important;
        background-color: transparent !important;
        border: none !important;
    }

    .user-panel img {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        margin-left: 5px;
    }

    .user-panel span {
        font-size: 12px;
    }
</style>

<nav class="navbar navbar-expand-lg fixed-top">
    <div class="container-fluid">
        <!--logo-->
        <div class="logo">
            <a asp-controller="Home" asp-action="Index">
                <img src="~/assets/img/logo-dark.png" alt="" class="logo-dark">
                <img src="~/assets/img/logo-white.png" alt="" class="logo-white">
            </a>
        </div>
        <!--/-->
        <!--navbar-collapse-->
        <div class="collapse navbar-collapse" id="main_nav">
            <ul class="navbar-nav ml-auto mr-auto">

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">صفحات </a>
                    <ul class="dropdown-menu fade-up">
                        <li>
                            <a class="dropdown-item" href="about.html"> درباره ما </a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="author.html"> نویسنده </a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="login.html"> ورود کاربران </a>
                        </li>
                        <li>
                            <a class="dropdown-item " href="register.html"> ثبت نام </a>
                        </li>
                        <li>
                            <a class="dropdown-item " href="page404.html"> 404 </a>
                        </li>
                    </ul>
                </li>

                @if (User.Identity.IsAuthenticated)
                {
                    <li class="nav-item">
                        <a class="nav-link user-panel" asp-controller="User" asp-action="Index"
                       asp-route-userId="@User.Identity.Name">
                            <img src="~/images/users/@currentUser.Item2" />
                            <span>@currentUser.Item1</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <form asp-controller="Account" asp-action="Logout" method="post">
                            <button type="submit" class="nav-link nav-button"> خروج </button>
                        </form>
                    </li>
                }
                else
                {
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Account" asp-action="Register"> ثبت نام </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Account" asp-action="Login"> ورود</a>
                    </li>
                }

            </ul>
        </div>
        <!--/-->
        <!--navbar-right-->
        <div class="navbar-right ml-auto">
            <div class="theme-switch-wrapper">
                <label class="theme-switch" for="checkbox">
                    <input type="checkbox" id="checkbox" />
                    <div class="slider round"></div>
                </label>
            </div>
            <div class="social-icones">
                <ul class="list-inline">
                    <li><a href="#"><i class="fab fa-facebook-f"></i></a></li>
                    <li>
                        <a href="#">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fab fa-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="search-icon">
                <i class="icon_search"></i>
            </div>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main_nav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </div>
</nav>